!function(e){"use strict";e.module("app",["ui.router","ui.mask"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("authentication",{url:"/",templateUrl:"templates/login_or_signup.html"}).state("addPastebin",{url:"/add_pastebin",templateUrl:"templates/one_pastebin.html",controller:"AddPastebinController",controllerAs:"ctrl",resolve:{LanguagesData:["langService",function(e){return e.promise}],UserData:["userService",function(e){return e.login(2)}]}}).state("pastebinList",{url:"/pastebin_list",templateUrl:"templates/pastebin_list.html",controller:"PastebinListController",controllerAs:"ctrl",resolve:{UserData:["userService",function(e){return e.login(2)}]}}).state("usersPastebin",{url:"/users_pastebin/{id:int}",templateUrl:"templates/pastebin_list.html",controller:"PastebinListController",controllerAs:"ctrl",resolve:{UserData:["userService",function(e){return e.login(2)}]}}).state("editPastebin",{url:"/edit_pastebin/{id:int}",templateUrl:"templates/one_pastebin.html",controller:"EditPastebinController",controllerAs:"ctrl",resolve:{LanguagesData:["langService",function(e){return e.promise}],UserData:["userService",function(e){return e.login(2)}],Pastebin:["$stateParams","pastebinService",function(e,t){return t.getPastebin(e.id)}]}}),t.otherwise("/")}])}(angular),function(e){"use strict";e.module("app").controller("AppController",[function(){console.log("APP CONTROLLER")}])}(angular),function(e){"use strict";e.module("app").constant("REST_END_POINT","http://localhost:3000")}(angular),function(e){"use strict";e.module("app").controller("AddPastebinController",["langService","userService","pastebinService","$state",function(e,t,n,i){var r=this;r.pastebin={username:t.getUsername(),user_id:t.getUserId(),code:""},r.buttonText="Add pastebin",r.cancelText="Cancel",r.languages=e.getLanguages(),r.selectedLanguage=r.languages[0],r.buttonAction=function(){r.pastebin.date=new Date,r.pastebin.lang_id=r.selectedLanguage.id,r.pastebin.language=r.selectedLanguage.name,n.addPastebin(r.pastebin).then(function(){i.go("pastebinList")})},r.cancelAction=function(){i.go("pastebinList")}}])}(angular),function(e){"use strict";e.module("app").controller("EditPastebinController",["langService","userService","Pastebin","$stateParams","pastebinService","$state",function(e,t,n,i,r,a){var s=this;s.pastebin=n,s.buttonText="Edit pastebin",s.cancelText="Cancel",s.languages=e.getLanguages(),s.selectedLanguage=e.getLanguageById(s.pastebin.lang_id),s.buttonAction=function(){s.pastebin.lang_id=s.selectedLanguage.id,s.pastebin.language=s.selectedLanguage.name,r.updatePastebin(s.pastebin,s.pastebin.id).then(function(){a.go("pastebinList")})},s.cancelAction=function(){a.go("pastebinList")}}])}(angular),function(e){"use strict";e.module("app").controller("PastebinListController",["pastebinService","userService","$state","$scope","$timeout","$stateParams",function(e,t,n,i,r,a){var s=this,u=a.id,o=function(e){return("0"+e.getDate()).slice(-2)+("0"+(e.getMonth()+1)).slice(-2)+e.getFullYear()};e.getPastebins(u).then(function(e){s.pastebins=e,s.displayPastebins=[],s.pastebins.forEach(function(e,t){s.displayPastebins.push({dateInString:o(new Date(e.date)),pastebin:e,list_id:t})})}),s.isErasable=function(e){return e.user_id===t.getUserId()&&u},s.isEditable=function(e){return e.user_id===t.getUserId()&&u},s.removePastebin=function(t,n){var i=e.deletePastebin(t);i.then(function(){s.displayPastebins.splice(n,1)})},s.edit=function(e){n.go("editPastebin",{id:e.id})};i.$watch("ctrl.dateFilter",function(e){var t=null,n=null;e&&8===e.length&&(t=new Date(e.substring(4,9),e.substring(2,4)-1,e.substring(0,2)),n=("0"+t.getDate()).slice(-2)+("0"+(t.getMonth()+1)).slice(-2)+t.getFullYear(),n!==e&&r(function(){s.dateFilter=n}))});s.fulltextFilter=function(e){var t,n,i,r;return s.textFilter?(t=s.textFilter.toLowerCase,n=String(e.pastebin.username).toLowerCase(),i=String(e.pastebin.language).toLowerCase(),r=String(e.pastebin.code).toLowerCase(),-1!==n.indexOf(s.textFilter)||-1!==i.indexOf(s.textFilter)||-1!==r.indexOf(s.textFilter)?!0:!1):!0}}])}(angular),function(e){"use strict";e.module("app").factory("langService",["$http","$log","REST_END_POINT",function(e,t,n){var i=null,r=e({method:"GET",url:n+"/langs"}).then(function(e){i=e.data},function(e){t.error("Request Failed: "+e)}),a=function(){return i},s=function(e){return i.filter(function(t){return t.id===e})[0]};return{promise:r,getLanguages:a,getLanguageById:s}}])}(angular),function(e){"use strict";e.module("app").factory("pastebinService",["$http","$log","REST_END_POINT",function(e,t,n){var i=function(i){return e({method:"GET",url:n+"/pastebins/"+i}).then(function(e){return t.log(e),e.data},function(e){t.error("Request Failed: "+e)})},r=function(i){return e({method:"POST",url:n+"/pastebins/",data:i}).then(function(e){return t.log(e),e.data},function(e){t.error("Request Failed: "+e)})},a=function(i,r){return e({method:"PUT",url:n+"/pastebins/"+r,data:i}).then(function(e){return t.log(e),e.data},function(e){t.error("Request Failed: "+e)})},s=function(i){return e({method:"DELETE",url:n+"/pastebins/"+i}).then(function(e){return t.log(e),e},function(e){t.error("Request Failed: "+e)})},u=function(){return e({method:"GET",url:n+"/pastebins/"}).then(function(e){return t.log(e),e.data},function(e){t.error("Request Failed: "+e)})},o=function(i){return e({method:"GET",url:n+"/pastebins/",params:{user_id:i}}).then(function(e){return t.log(e.data),e.data},function(e){t.error("Request Failed: "+e)})},l=function(e){return e?o(e):u()};return{getPastebin:i,addPastebin:r,updatePastebin:a,deletePastebin:s,getPastebins:l}}])}(angular),function(e){"use strict";e.module("app").factory("userService",["$http","$log","REST_END_POINT",function(e,t,n){var i=null,r=function(r){return e({method:"GET",url:n+"/users/"+r}).then(function(e){i=e.data},function(e){t.error("Request Failed: "+e)})},a=function(){i=null},s=function(){return i.username},u=function(){return i.id},o=function(){return Boolean(i.is_admin)};return{getUsername:s,getUserId:u,isAdmin:o,login:r,logout:a}}])}(angular);